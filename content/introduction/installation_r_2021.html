---
title: "Guide d'installation ou de mise à jour de R et RStudio"
linkTitle: "Installation de R et RStudio"
author: "Sophie Baillargeon, Université Laval"
date: "2021-01-15"
weight: 2
slug: "installation_r_rstudio"
lastmodifierdisplayname: "Sophie Baillargeon"
lastmodifieremail: "sophie.baillargeon@mat.ulaval.ca"
output:
  blogdown::html_page:
    toc: true
    toc_depth: 2
    number_sections: true
    highlight: tango
  pdf_document:
    toc: yes
    toc_depth: 2
    number_sections: true
    highlight: tango
header-includes:
- \usepackage[french]{babel}
- \frenchbsetup{StandardLayout}
- \hypersetup{colorlinks=true, urlcolor = {blue}, linkcolor = {blue}}
editor_options: 
  chunk_output_type: console
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a>
<ul>
<li><a href="#système-dexploitation"><span class="toc-section-number">1.1</span> Système d’exploitation</a></li>
<li><a href="#tools"><span class="toc-section-number">1.2</span> Nécessaire au développement de packages R</a></li>
<li><a href="#latex"><span class="toc-section-number">1.3</span> LaTeX</a></li>
</ul></li>
<li><a href="#logiciel-r"><span class="toc-section-number">2</span> Logiciel R</a>
<ul>
<li><a href="#installation"><span class="toc-section-number">2.1</span> Installation</a></li>
<li><a href="#uninstall"><span class="toc-section-number">2.2</span> Mise à jour</a></li>
<li><a href="#remarques"><span class="toc-section-number">2.3</span> Remarques</a></li>
</ul></li>
<li><a href="#rstudio"><span class="toc-section-number">3</span> RStudio</a>
<ul>
<li><a href="#installation-1"><span class="toc-section-number">3.1</span> Installation</a></li>
<li><a href="#config"><span class="toc-section-number">3.2</span> Configurations de RStudio</a></li>
<li><a href="#mise-à-jour"><span class="toc-section-number">3.3</span> Mise à jour</a></li>
</ul></li>
<li><a href="#packages-r"><span class="toc-section-number">4</span> Packages R</a>
<ul>
<li><a href="#installation-2"><span class="toc-section-number">4.1</span> Installation</a></li>
<li><a href="#mise-à-jour-1"><span class="toc-section-number">4.2</span> Mise à jour</a></li>
</ul></li>
<li><a href="#rtools"><span class="toc-section-number">5</span> Rtools (Windows seulement)</a></li>
<li><a href="#xcode"><span class="toc-section-number">6</span> Xcode command line tools (macOS seulement)</a></li>
<li><a href="#résolution-de-problèmes"><span class="toc-section-number">7</span> Résolution de problèmes</a></li>
</ul>
</div>

<hr />
<p><em>Note préliminaire : Lors de la révision de ces notes, les plus récentes versions des logiciels mentionnés étaient R 4.0.3 et RStudio 1.4.1103. Pour d’autres versions, les procédures d’installation peuvent différer.</em></p>
<hr />
<!---
Voici quelques conseils d'installation ou de mise à jour de R.
-->
<div id="introduction" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<div id="système-dexploitation" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Système d’exploitation</h2>
<p>Cette fiche explique les étapes générales d’installation de <a href="https://www.r-project.org/">R</a> et <a href="https://www.rstudio.com/">RSutdio</a> pour tous les systèmes d’exploitation :</p>
<ul>
<li>Windows,</li>
<li>macOS (représentant ici également ses prédécesseurs Mac OS X et OS X);</li>
<li>Linux (ou Unix).</li>
</ul>
<p>Quelques explications plus détaillées sont parfois fournies pour un système d’exploitation spécifique (en particulier Windows). La documentation officielle du <em>R core</em> concernant l’installation de la plus récente version de R est disponible ici : <a href="https://cran.r-project.org/doc/manuals/r-release/R-admin.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-admin.html</a></p>
<!---
Sous Windows
En démarrant des programmes (.exe) sous certaines versions de Windows, notamment la version 7, Windows pose des questions de sécurité du genre «\ Voulez-vous autoriser le programme suivant provenant d'un éditeur inconnu à apporter des modifications à cet ordinateur ?\ » ou  «\ L'éditeur n'a pas pu être vérifié. Voulez-vous vraiment exécuter ce logiciel ?\ ». Vous n'avez qu'à donner votre autorisation. Vous connaissez la provenance des .exe que vous tentez d'exécuter et vous savez qu'il ne s'agit pas de logiciels malveillants.
-->
</div>
<div id="tools" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Nécessaire au développement de packages R</h2>
<p>Afin de développer des packages R, quelques outils supplémentaires au logiciel R sont nécessaires, notamment un compilateur C/C++.</p>
<ul>
<li><p>Sous Windows, tous les outils requis sont réunis dans les <a href="http://cran.r-project.org/bin/windows/Rtools/">Rtools</a>, qui sont gratuitement distribués sur internet. Ce document explique <a href="#rtools">comment installer les Rtools</a>.</p></li>
<li><p>Sous macOS, il faut avoir les « Xcode command line tools », disponibles gratuitement, s’ils ne sont pas déjà installés. Ce document explique <a href="#xcode">comment installer les Xcode command line tools</a>.</p></li>
<li><p>Sous Linux, il faut s’assurer d’avoir installé R accompagné des ses « development tools » (<code>r-base-dev</code>).</p></li>
</ul>
</div>
<div id="latex" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> LaTeX</h2>
<p>Pour compiler des documents R Markdown vers un format PDF, une installation de LaTeX est requise. De plus, une des commandes R pour le développement de packages (<code>R CMD check</code>) a besoin d’un compilateur LaTeX pour tester la création de la documentation en format PDF. Ainsi, plusieurs utilisateurs de R auront un jour également besoin de LaTeX.</p>
<p>Voici quelques suggestions de compilateurs LaTeX gratuits :</p>
<ul>
<li>MiKTeX : <a href="https://miktex.org/download" class="uri">https://miktex.org/download</a></li>
<li>MacTeX (macOS seulement) : <a href="http://www.tug.org/mactex/" class="uri">http://www.tug.org/mactex/</a></li>
<li><a href="https://yihui.org/tinytex/">TinyTeX</a>, installable à partir de R grâce au package R <code>tinytex</code> (pensé spécifiquement pour les utilisateurs de R, peut-être moins intéressant pour ceux qui utilisent aussi LaTeX en dehors de R) : <a href="https://CRAN.R-project.org/package=tinytex" class="uri">https://CRAN.R-project.org/package=tinytex</a></li>
</ul>
<p>Notez que les systèmes Linux viennent habituellement par défaut avec une distribution de LaTeX.</p>
<hr />
</div>
</div>
<div id="logiciel-r" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Logiciel R</h1>
<p>Si, lors de l’installation de RStudio, R est déjà présent sur l’ordinateur, son emplacement devrait être détecté automatiquement par RStudio. Il est donc préférable de débuter par l’installation de R.</p>
<div id="installation" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Installation</h2>
<p>Suivez d’abord ces étapes :</p>
<ul>
<li>allez sur le site <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>;</li>
<li>cliquez sur « CRAN » dans le menu à gauche;</li>
<li>sélectionnez le site miroir du CRAN le plus près de chez vous;</li>
<li>dans la case intitulée « Download and Install R », cliquez sur le lien correspondant à votre système d’exploitation.</li>
</ul>
<p>Sous Windows ou macOS, il suffit de télécharger un installateur et de double-cliquer sur le fichier pour démarrer l’installation. Sous Linux, les instructions varient en fonction de la distribution utilisée.</p>
<div id="détails-pour-windows" class="section level3 unnumbered">
<h3>Détails pour Windows</h3>
<p>Cliquez sur « base », puis sur « Download R x.y.z for Windows » où x.y.z est le numéro de la version la plus à jour de R. Le téléchargement du fichier « R-x.y.z-win.exe » débutera. Il s’agit d’un installateur, soit un programme permettant d’installer R. Il vous suffit ensuite de double-cliquer sur ce fichier et l’installation débutera. <em>Vous pouvez accepter toutes les options par défaut offertes par l’installateur.</em></p>
<p>Pour télécharger l’installateur d’une version antérieure de R, il faut cliquez sur « Previous releases », puis sur la version désirée.</p>
</div>
<div id="détails-pour-linux-ubuntu" class="section level3 unnumbered">
<h3>Détails pour Linux Ubuntu</h3>
<p>Vous pouvez procéder à l’installation de R en suivant les instructions décrites sur cette page web :<br />
<a href="http://basicgroundwork.blogspot.ca/2015/05/install-r-in-ubuntu-1404.html" class="uri">http://basicgroundwork.blogspot.ca/2015/05/install-r-in-ubuntu-1404.html</a></p>
<p>La première étape est d’ajouter un des miroirs du CRAN à la liste des dépôts informatiques depuis lesquels votre instance peut acquérir des logiciels. Cette liste se trouve dans le fichier <code>/etc/apt/sources.list</code>. Vous devez y ajouter le miroir <code>http://cran.rstudio.com/bin/linux/ubuntu</code> ou un autre miroir du CRAN. Pour effectuer cet ajout, le blogue cité plus haut suggère d’ouvrir le fichier avec <code>vi</code>, de l’éditer pour ajouter la ligne : <code>deb http://cran.rstudio.com/bin/linux/ubuntu trusty/</code>, puis d’enregistrer et fermer le fichier. Encore plus simplement, il est possible de réaliser cette édition en une seule commande soumise dans le terminal, la suivante :</p>
<pre><code>printf &#39;deb http://cran.rstudio.com/bin/linux/ubuntu trusty/\n&#39;| sudo tee -a \
/etc/apt/sources.list</code></pre>
<p>Il faut ensuite mettre à jour la liste des fichiers disponibles dans les dépôts énumérés dans le fichier <code>/etc/apt/sources.list</code> avec la commande suivante :</p>
<pre><code>sudo apt-get update</code></pre>
<p>Si une erreur similaire à la suivante est générée :</p>
<pre><code>W: GPG error: http://cran.rstudio.com/bin/linux/ubuntu trusty/ Release: The following 
signatures couldn&#39;t be verified because the public key is not available: NO_PUBKEY 
51716619E084DAB9</code></pre>
<p>alors les commandes suivantes devraient régler le problème (en utilisant le même numéro de clé publique que dans l’erreur).</p>
<pre><code>gpg --keyserver hkp://keyserver.ubuntu.com:80 --recv-key 51716619E084DAB9
gpg -a --export 51716619E084DAB9| sudo apt-key add -
sudo apt-get update</code></pre>
<p>Finalement, vous serez en mesure de procéder à l’installation de R et de ses « development tools » avec la commande suivante :</p>
<pre><code>sudo apt-get install r-base r-base-dev</code></pre>
<!--
Autres références qui m'ont été utiles
- http://thestatsgeek.com/2015/11/30/running-simulations-in-r-using-amazon-web-services/
- fichier `ec2steps.bash` de https://github.com/JohnMount/ec2R
- http://randyzwitch.com/r-amazon-ec2/?utm_content=buffer6b6e9&utm_source=buffer&utm_medium=twitter&utm_campaign=Buffer
-->
</div>
</div>
<div id="uninstall" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Mise à jour</h2>
<p>Si une version antérieure de R est déjà installée sur votre ordinateur et que vous souhaitez la remplacer par une nouvelle version, <em>désinstaller l’ancienne version avant d’installer la nouvelle comporte quelques avantages</em>. Le principal avantage, sous Windows, est que les associations entre des extensions et R demeurent fonctionnelles. C’est le cas, par exemple, pour l’extension <code>.Rdata</code>. (L’extension <code>.R</code> n’est pas affectée si RStudio est installé, car elle est associée à RStudio plutôt qu’à R.) Aussi, les raccourcis sur le Bureau ou le menu démarrer ne sont pas perdus.</p>
<p>Cependant, sachez que plusieurs versions de R peuvent être installées simultanément sur votre ordinateur. Par défaut, chaque version de R est installée dans un sous-dossier portant le numéro de la version. Avoir plus d’une version de R est utile, par exemple, lorsqu’un de vos programmes R fonctionne seulement avec une version antérieure de R.</p>
<div id="détails-pour-windows-1" class="section level3 unnumbered">
<h3>Détails pour Windows</h3>
<p>Pour désinstaller un logiciel sous Windows, une façon simple de procéder est la suivante :</p>
<ul>
<li>allez dans les paramètres de Windows, puis dans « Applications » (ou l’équivalent selon votre version de Windows);</li>
<li>sélectionnez « R for Windows u.v.w » où u.v.w est le numéro de la version de R à désinstaller;</li>
<li>cliquez sur « Désinstaller ».</li>
</ul>
<p>Vous pouvez aussi aller dans les fichiers d’installation de R (par défaut <code>"C:/Program Files/R/R-u.v.w"</code>) et double-cliquer sur le fichier <code>unins000.exe</code>.</p>
<p>La désinstallation démarrera.</p>
</div>
</div>
<div id="remarques" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Remarques</h2>
<div id="comment-être-informé-de-la-disponibilité-dune-nouvelle-version-de-r" class="section level3 unnumbered">
<h3>Comment être informé de la disponibilité d’une nouvelle version de R ?</h3>
<p>Il y a typiquement entre 4 et 6 mises à jour de R par année. Pour être informé lorsqu’une nouvelle version est disponible, vous pouvez vous abonner à la liste courriel R-announce (<a href="https://stat.ethz.ch/mailman/listinfo/r-announce" class="uri">https://stat.ethz.ch/mailman/listinfo/r-announce</a>). Les abonnés reçoivent un courriel lors de la mise en ligne d’une nouvelle version de R.</p>
<!---
Détails des informations que l'installateur vous demande avant de procéder à l'installation (pour R version 3.0.2)\ :

* choix de la langue pour le programme d'installation;
* acceptation de la licence;
* choix de l'emplacement de R\ : par défaut il vous propose `"C:/Program Files/R/R-x.y.z"`;
* choix des composantes à installer\ : installation complète par défaut;
* choix des options de démarrage\ : interface MDI par défaut plutôt que SDI, format de l'aide HTML par défaut plutôt que texte, accès à internet standard par défaut plutôt qu'avec Internet2 (emploi les paramètres proxy d'Internet Explorer);
* choix de l'emplacement des raccourcis dans le menu démarrer\ : par défaut dans un dossier nommé R;
* choix concernant les tâches supplémentaires\ :
  + créer une icône sur le bureau (oui par défaut);
  + créer une icône dans la barre de lancement rapide (non par défaut);
  + enregistrer le numéro de version dans le registre (oui par défaut);
  + associer R avec les fichiers .Rdata (oui par défaut).
-->
</div>
<div id="utilitaires-pour-automatiser-les-installations" class="section level3 unnumbered">
<h3>Utilitaires pour automatiser les installations</h3>
<p>Pour les utilisateurs de Windows, le <a href="https://CRAN.R-project.org/package=installr">package <code>installr</code></a> propose des fonctions pour installer ou mettre à jour R (ou RStudio ou les Rtools) simplement en lançant une commande dans la console R. <a href="https://CRAN.R-project.org/package=installr" class="uri">https://CRAN.R-project.org/package=installr</a></p>
<p>Pour les utilisateurs de macOS, le <a href="https://github.com/AndreaCirilloAC/updateR">package <code>updateR</code></a> propose l’équivalent, mais limité à l’installation de R. <a href="https://github.com/AndreaCirilloAC/updateR" class="uri">https://github.com/AndreaCirilloAC/updateR</a></p>
<hr />
</div>
</div>
</div>
<div id="rstudio" class="section level1" number="3">
<h1><span class="header-section-number">3</span> RStudio</h1>
<div id="installation-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Installation</h2>
<p>Vous pouvez télécharger gratuitement la version la plus à jour de RStudio (RStudio Desktop Open Source License) à partir du site web : <a href="https://www.rstudio.com/products/rstudio/download/" class="uri">https://www.rstudio.com/products/rstudio/download/</a></p>
<p>Le fichier d’installation correspondant à votre système d’exploitation vous sera proposé (vers le milieu de la page). Vous pouvez aussi trouver le bon fichier dans le tableau intitulé « All Installers ».</p>
<div id="détails-pour-windows-2" class="section level3 unnumbered">
<h3>Détails pour Windows</h3>
<p>Le fichier téléchargé est un installateur. Il suffit de double-cliquer sur ce fichier et de répondre aux quelques questions. Encore une fois, <em>vous pouvez accepter toutes les options par défaut offertes par l’installateur</em>.</p>
</div>
</div>
<div id="config" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Configurations de RStudio</h2>
<p>Une fois RStudio installé, vous désirerez peut-être modifier quelques-unes de ses configurations. Celles-ci peuvent être changées par le menu « Tools &gt; Global Options… ». Par exemple, il peut être intéressant de :</p>
<ul>
<li>dans « General &gt; Basic », sélectionner « Never » pour l’option « Save workspace to .RData on exit »;</li>
<li>dans « Code &gt; Saving », sélectionner « UTF-8 » comme « Default text encoding »;</li>
<li>dans « Code &gt; Display », cocher « Show line numbers »;</li>
<li>autres selon vos goûts.</li>
</ul>
<!---
Aussi, si l'installateur de RStudio n'a pas créé de raccourci sur le bureau, il peut être pratique de s'en créer un. Si vous ne savez pas comment faire, voici un lien qui l'explique\ : http://support.microsoft.com/kb/140443/fr.

Finalement, on peut vouloir associer RStudio à certaines extensions de fichiers autres que .R, par exemple les fichiers .Rnw. Ainsi, en double-cliquant sur un fichier portant une de ces extensions, il est automatiquement ouvert en RStudio. Si vous ne savez pas comment modifier les associations entre les programmes et les extensions de fichiers, voici un lien qui l'explique\ : http://support.microsoft.com/kb/307859/fr .
-->
</div>
<div id="mise-à-jour" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Mise à jour</h2>
<p>Pour mettre à jour RStudio, il est inutile de désinstaller l’ancienne version comme il est conseillé de le faire pour R. Cette différence vient du fait que la nouvelle version de RStudio porte exactement le même nom que l’ancienne (il n’y a pas de numéro de version dans son nom) et elle est, par défaut, installée exactement dans le même emplacement que l’ancienne version. Les anciens fichiers sont donc remplacés par les nouveaux.</p>
<p>Le menu « Help &gt; Check for Updates » permet de vérifier facilement si une nouvelle version de RStudio est disponible. Si c’est le cas, il suffit de l’installer de la même façon que lors d’une première installation.</p>
<p>Les configurations de RStudio ne sont pas perdues lors d’une mise à jour.</p>
<hr />
</div>
</div>
<div id="packages-r" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Packages R</h1>
<div id="installation-2" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Installation</h2>
<div id="à-partir-du-cran" class="section level3 unnumbered">
<h3>À partir du CRAN</h3>
<p>Le <a href="http://cran.r-project.org/mirrors.html">CRAN</a> est le dépôt informatique de packages R géré par le <em>R core team</em>. C’est là que la majorité des packages R sont rendus disponibles publiquement.</p>
<p>Pour installer un package à partir d’un des miroirs du CRAN, il suffit de :</p>
<ul>
<li>s’assurer d’être connecté à internet,</li>
<li>démarrer une session R et</li>
<li>lancer la commande suivante en R :</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;nomPkg&quot;</span>)</span></code></pre></div>
<p>En RStudio, la commande <code>install.packages</code> peut être lancée par le bouton « Install » de la sous-fenêtre « Packages », en sélectionnant les options appropriées.</p>
</div>
<div id="à-partir-dun-dépôt-informatique-autre-que-le-cran" class="section level3 unnumbered">
<h3>À partir d’un dépôt informatique autre que le CRAN</h3>
<p>En plus du CRAN, des packages R sont partagés à d’autres endroits sur le web, notamment sur :</p>
<ul>
<li>le dépôt informatique de packages en bio-informatique <a href="http://www.bioconductor.org/">Bioconductor</a>,</li>
<li>un service web d’hébergement et de gestion de versions tel que
<a href="https://github.com/topics/r">GitHub</a>, <a href="https://gitlab.com/explore">GitLab</a> ou <a href="https://bitbucket.org/repo/all?name=R&amp;language=r">BitBucket</a>.</li>
</ul>
<p>Le <a href="https://remotes.r-lib.org/index.html">package <code>remotes</code></a> offre des fonctions pour télécharger et installer directement à partir de ces sites (p. ex. fonctions <a href="https://remotes.r-lib.org/reference/install_bioc.html"><code>install_bioc</code></a>, <a href="https://remotes.r-lib.org/reference/install_github.html"><code>install_github</code></a>, <a href="https://remotes.r-lib.org/reference/install_gitlab.html"><code>install_gitlab</code></a> et <a href="https://remotes.r-lib.org/reference/install_bitbucket.html"><code>install_bitbucket</code></a>).</p>
</div>
<div id="à-partir-dun-fichier-local" class="section level3 unnumbered">
<h3>À partir d’un fichier local</h3>
<p>Pour installer un package à partir d’un fichier local, il faut plutôt lancer la commande suivante en R :</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;cheminAcces/nomPkg_NoVersion.zip&quot;</span>, <span class="at">repos =</span> <span class="cn">NULL</span>)</span></code></pre></div>
<p>Dans cet exemple, l’extension du fichier doit être adaptée selon le système d’exploitation utilisé. L’extension <code>.zip</code> est celle d’un package pour Windows, <code>.tgz</code> est l’extension d’un package pour macOS et <code>.tar.gz</code> est l’extension d’un package source, qui est aussi la version requise avec Linux.</p>
</div>
<div id="emplacement-des-packages-installés" class="section level3 unnumbered">
<h3>Emplacement des packages installés</h3>
<p>Le répertoire dans lequel les packages R sont installés par défaut est identifié dans le premier élément du vecteur retourné par la commande R suivante :</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>()</span></code></pre></div>
<p>Les autres éléments de ce vecteur sont d’autres répertoires dans lesquels R peut accéder à des installations de packages.</p>
</div>
</div>
<div id="mise-à-jour-1" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Mise à jour</h2>
<p>Il ne faut pas oublier que les packages R sont eux aussi mis à jour périodiquement, tout comme R et RStudio. Pour avoir accès aux dernières corrections et aux derniers ajouts de fonctionnalités des packages que vous utilisez, il est conseillé de vérifier fréquemment si de nouvelles versions sont disponibles et de les installer si c’est le cas.</p>
<p>Une mise à jour d’un package R se fait avec la commande <code>install.packages</code>, exactement comme une installation. Il n’y a rien à désinstaller préalablement.</p>
<p>En RStudio, le bouton « Update » de la sous-fenêtre « Packages » permet de facilement vérifier si des mises à jour de packages sont disponibles.</p>
<div id="packages-et-mise-à-jour-de-r" class="section level3 unnumbered">
<h3>Packages et mise à jour de R</h3>
<p>Après une mise à jour de R, il est possible que vous n’ayez plus accès, avec la nouvelle version de R, aux packages que vous aviez installés avec une version antérieure de R. Cela dépend en fait du répertoire d’installation des packages.</p>
<p>S’ils sont installés directement dans le répertoire d’installation de R, il est certain que vous n’y aurez plus accès avec la nouvelle version de R. C’est que le nom du répertoire d’installation de packages dépend alors du numéro de version de R.</p>
<p>Afin de ne pas forcer l’utilisateur à mettre à jour les packages qu’il utilise à chaque fois qu’il met R à jour, le comportement par défaut de R est d’installer les packages dans un répertoire local à l’utilisateur, dont le nom dépend seulement des deux premiers numéros composant le numéro de version. Par exemple, avec mon installation de R sous Windows, les packages que j’installe se retrouvent par défaut dans le répertoire <code>"C:/Users/Sophie/Documents/R/win-library/u.v"</code>. Lors d’une mise à jour mineure de R, seul le dernier numéro composant le numéro de version change. Par exemple, le 10 octobre 2020, la version 4.0.3 de R est sortie, améliorant la version 4.0.2 sortie en juin 2020. Le répertoire d’installation de packages par défaut est donc demeuré le même entre les deux versions. Cependant, lorsqu’une mise à jour plus importante de R sortira, pour laquelle le deuxième numéro dans le numéro de version sera incrémenté, alors la mise à jour provoquera une perte d’accès aux packages installés précédemment, selon le comportement par défaut de R. Vous pourriez alors réagir en :</p>
<ul>
<li>réinstallant tous les packages dont vous avez besoin avec la nouvelle version de R, du coup les packages sont mis à jour;</li>
<li>ajouter l’ancien répertoire d’installation de packages dans le chemin de recherche de packages avec la commande suivante, en remplaçant la chaîne de caractères par le chemin d’accès approprié :</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>(<span class="fu">c</span>(<span class="fu">.libPaths</span>(), <span class="st">&quot;C:/Users/Sophie/Documents/R/win-library/u.v&quot;</span>))</span></code></pre></div>
<hr />
</div>
</div>
</div>
<div id="rtools" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Rtools (Windows seulement)</h1>
<p>Comme mentionné dans les <a href="#tools">notes préliminaires</a>, le développement de packages R nécessite des outils non fournis dans l’installation de R. La version pour Windows de ces outils se trouve dans les <a href="http://cran.r-project.org/bin/windows/Rtools/">Rtools</a>, plus précisément nommés Rtools40 depuis la sortie de R 4.0.0 en avril 2020.</p>
<div id="installation-3" class="section level3 unnumbered">
<h3>Installation</h3>
<p>Vous pouvez vous rendre sur le site de téléchargement des Rtools comme suit :</p>
<ul>
<li>allez sur le site <a href="http://www.r-project.org/" class="uri">http://www.r-project.org/</a>;</li>
<li>cliquez sur « CRAN » dans le menu à gauche;</li>
<li>sélectionnez le site miroir du CRAN le plus près de chez vous;</li>
<li>dans la case intitulée « Download and Install R », cliquez sur « Download R for Windows »;</li>
<li>cliquez sur « Rtools ».</li>
</ul>
<p>Ensuite, téléchargez l’installateur approprié pour la version de R installée sur votre ordinateur. Si votre installation de R est à jour, il s’agit d’un des fichiers d’extension .exe (64-bit ou 32-bit) directement disponible sur la page atteinte en suivant les instructions précédentes.</p>
<!--
Modifié le 2021-01-13 : les Rtools ont changé depuis la sortie de R 4.0

Ensuite, téléchargez la version la plus à jour qui est compatible avec la version de R installée sur votre ordinateur. Si votre R est à jour, il s’agit probablement de la version pour laquelle la colonne « Frozen? » indique « No ».
-->
<p>En cliquant sur le nom du fichier, le téléchargement de l’installateur débutera. Il vous suffira ensuite de double-cliquer sur le fichier téléchargé et l’installation débutera. Encore une fois, <em>vous pouvez accepter toutes les options par défaut offertes par l’installateur</em>.</p>
</div>
<div id="ajout-des-rtools-au-path" class="section level3 unnumbered">
<h3>Ajout des Rtools au PATH</h3>
<p>Après l’installation des Rtools, il reste encore un détail technique à régler. Il faut ajouter les <em>make utilities</em> de Rtools au PATH de votre ordinateur. Le PATH est une variable d’environnement du système qui indique à l’ordinateur dans quels dossiers rechercher les programmes exécutables.</p>
<p>La page web à partir de laquelle vous avez téléchargé l’installateur des Rtools propose, à la section intitulée « Putting Rtools on the PATH », une façon d’effectuer cet ajout. Je vous invite à lire et suivre les indications fournies à cet endroit. Je mentionne seulement ici qu’en résumé, il suffit de lancer la commande suivante dans la console R puis de redémarrer R :</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="st">&#39;PATH=&quot;${RTOOLS40_HOME}</span><span class="sc">\\</span><span class="st">usr</span><span class="sc">\\</span><span class="st">bin;${PATH}&quot;&#39;</span>, <span class="at">con =</span> <span class="st">&quot;~/.Renviron&quot;</span>)</span></code></pre></div>
<!--

Retiré le 2021-01-13 : les Rtools ont changé depuis la sortie de R 4.0

## Mise à jour

Les Rtools sont mis à jour périodiquement. Je vous conseille de vérifier si une nouvelle version des Rtools est disponible à chaque fois que vous mettez R à jour. Pour ce faire, il faut\ :

- se rendre sur le site web de téléchargement des Rtools;
- vérifier le numéro de la version courante des Rtools en cliquant sur le lien «\ VERSION.txt\ » au-dessus du tableau de téléchargement;
- comparer ce numéro à celui dans le fichier «\ VERSION.txt\ » situé dans le dossier d'installation des Rtools (par défaut `"C:/Rtools/VERSION.txt"`);
- si la version sur votre ordinateur est antérieure à la version disponible sur internet, mettre les Rtools à jour.

Comme pour R, il est conseillé de désinstaller les Rtools avant d'en installer une nouvelle version (des [indications pour la désinstallation de programmes sous Windows sont fournies plus haut](#uninstall)).
-->
<hr />
</div>
</div>
<div id="xcode" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Xcode command line tools (macOS seulement)</h1>
<p>Comme mentionné dans les <a href="#tools">notes préliminaires</a>, le développement de packages R nécessite des outils non fournis dans l’installation de R. Sur macOS, les « Xcode command line tools » contiennent ces outils.</p>
<div id="installation-4" class="section level3 unnumbered">
<h3>Installation</h3>
<p>Sur plusieurs versions récentes de macOS, les Xcode command line tools s’obtiennent gratuitement simplement en soumettant la commande suivante dans le Terminal (et en acceptant l’installation si une fenêtre s’ouvre pour vous le demander) :</p>
<pre><code>xcode-select --install</code></pre>
<p>Certaines versions de macOS pourraient exiger que vous vous inscriviez en tant que développeur Apple. Vous pouvez le faire gratuitement ici : <a href="https://developer.apple.com/programs/register/" class="uri">https://developer.apple.com/programs/register/</a></p>
<p>Une autre façon d’obtenir les outils nécessaires au développement de packages R sur macOS est d’installer les « Xcode developer tools » complets, disponibles gratuitement sur le « App Store » : <a href="https://apps.apple.com/ca/app/xcode/id497799835?mt=12" class="uri">https://apps.apple.com/ca/app/xcode/id497799835?mt=12</a></p>
</div>
<div id="références-pour-obtenir-plus-de-détails" class="section level3 unnumbered">
<h3>Références pour obtenir plus de détails</h3>
<ul>
<li><a href="https://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/" class="uri">https://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/</a></li>
<li><a href="https://r-pkgs.org/setup.html#macos" class="uri">https://r-pkgs.org/setup.html#macos</a></li>
</ul>
<hr />
</div>
</div>
<div id="résolution-de-problèmes" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Résolution de problèmes</h1>
<p>Voici comment régler certains problèmes techniques déjà rencontrés par des étudiants du cours.</p>
<!--
### RStudio ne trouve pas les Rtools alors qu'ils sont bel et bien installés sur l'ordinateur. {-}

Dans ce cas, une solution sous Windows est de modifier le PATH de votre ordinateur. Le PATH est une variable d'environnement du système qui indique à l'ordinateur dans quels dossiers rechercher les programmes exécutables. L'installateur de Rtools peut modifier le PATH pour vous. Vous pouvez donc désinstaller les Rtools, puis les réinstaller en sélectionnant l'option de modifier le PATH offerte par l'installateur, mais non sélectionnée par défaut, libellée «\ Add rtools to system PATH\ ».
-->
<div id="les-accents-saffichent-incorrectement-dans-rstudio." class="section level3 unnumbered">
<h3>Les accents s’affichent incorrectement dans RStudio.</h3>
<p>RStudio suppose un certain encodage lors de l’ouverture d’un fichier, par exemple d’un programme (aussi nommé script) R. Pour connaître l’encodage supposé par votre installation de RStudio, allez dans le menu « Tools &gt; Global Options… &gt; Code &gt; Saving ». Le champ « Default text encoding: » sert à spécifier l’encodage par défaut. Les programmes R que vous téléchargerez sur le site web du cours seront toujours en encodage UTF-8.</p>
<p>Pour corriger l’affichage des accents dans un fichier en RStudio, vous pouvez :</p>
<ul>
<li>soit rouvrir le fichier avec le bon encodage par le menu « File &gt; Reopen with Encoding… » (et sélectionner « UTF-8 » s’il s’agit d’un de mes fichiers),</li>
<li>soit modifier la configuration de votre installation de RStudio pour utiliser par défaut l’encodage du fichier. Cette modification peut se faire par menu « File &gt; Reopen with Encoding… » en sélectionnant l’encodage voulu, puis en cochant « Set as default encoding for source files », ou encore par le menu « Tools &gt; Global Options… &gt; Code &gt; Saving », comme mentionné dans la <a href="#config">section concernant les modifications de configuration de RStudio</a>.</li>
</ul>
</div>
<div id="lexplorateur-de-fichiers-windows-naffiche-pas-les-extensions-de-certains-fichiers." class="section level3 unnumbered">
<h3>L’explorateur de fichiers Windows n’affiche pas les extensions de certains fichiers.</h3>
<p>Ce problème n’est pas en lien avec l’installation de R ou RStudio, mais on me questionne souvent à ce propos. Par défaut, Windows n’affiche pas les extensions des fichiers dont le type a été associé à un programme. Voici une façon de changer cette option avec Windows 10.</p>
<p>Ouvrez la fenêtre d’« Options des dossiers » . Il est possible d’ouvrir cette fenêtre à partir d’un explorateur de fichiers, par le menu « Fichier &gt; Modifier les options des dossiers et de recherche ».
Ensuite, sous l’onglet Affichage, décochez l’option « Masquer les extensions des fichiers dont le type est connu ».</p>
<!--
### Je n'arrive pas à installer des packages, car on me dit que je n'ai pas la permission de modifier le contenu du dossier où les packages doivent être installés. {-}

Il existe plusieurs solutions à ce problème. La plus simple est certainement d'installer R dans un emplacement où vous avez la permission de modifier le contenu selon les privilèges associés à votre compte sur votre ordinateur. Sur Windows, installer R dans `"C:/R"` au lieu de l'emplacement par défaut `"C:/Program Files/R"` règle habituellement le problème. Pour ce faire, commencez par désinstaller R, puis réinstallez-le en changeant l'emplacement que vous propose l'installateur.
-->
</div>
</div>
